"use strict";(self.webpackChunkcrudApp=self.webpackChunkcrudApp||[]).push([[538],{8538:(I,m,u)=>{u.r(m),u.d(m,{ProductosModule:()=>F});var h=u(6895),a=u(433),s=u(4154),t=u(8256),Z=u(7556);let v=(()=>{class o{constructor(e,r){this.router=e,this.authService=r}get usuario(){return this.authService.usuario}logout(){this.router.navigateByUrl("/auth"),this.authService.logout()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.F0),t.Y36(Z.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-main"]],decls:32,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand"],[1,"text-danger"],["type","button","data-bs-toggle","collapse","data-bs-target","#menu","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","menu",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["aria-current","page","routerLink","./agregar",1,"nav-link","active"],["routerLink","./listado",1,"nav-link","active"],[1,"d-md-none","text-white-50"],[1,"d-flex"],["type","button","disabled","",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success","position-relative"],[1,"fa-solid","fa-cart-shopping"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"],[1,"visually-hidden"],[1,"container-fluid",2,"margin-top","15px"]],template:function(e,r){1&e&&(t.TgZ(0,"nav",0)(1,"div",1),t._uU(2," nombre "),t.TgZ(3,"a",2)(4,"span",3),t._uU(5,"Crud Angular"),t.qZA()(),t.TgZ(6,"button",4),t._UZ(7,"span",5),t.qZA(),t.TgZ(8,"div",6)(9,"ul",7)(10,"li",8)(11,"a",9),t._uU(12,"Agregar Producto"),t.qZA()(),t.TgZ(13,"li",8)(14,"a",10),t._uU(15,"Listado de Productos"),t.qZA()()(),t._UZ(16,"hr",11),t.TgZ(17,"form",12)(18,"button",13),t._uU(19),t.qZA(),t._uU(20," \xa0 "),t.TgZ(21,"button",14),t.NdJ("click",function(){return r.logout()}),t._uU(22,"Salir"),t.qZA(),t._uU(23," \xa0 "),t.TgZ(24,"button",15)(25,"i",16)(26,"span",17),t._uU(27," 1 "),t.TgZ(28,"span",18),t._uU(29,"unread messages"),t.qZA()()()()()()()(),t.TgZ(30,"div",19),t._UZ(31,"router-outlet"),t.qZA()),2&e&&(t.xp6(19),t.Oqu(r.usuario.name))},dependencies:[a._Y,a.JL,s.lC,s.yS]}),o})();var A=u(5226),b=u.n(A),d=u(2340),f=u(529);let l=(()=>{class o{constructor(e){this.http=e,this.API=d.N.baseUrl}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}addNewProducto(e){return this.http.post(`${this.API}/productos`,e,this.headers)}getProductos(e=0){return this.http.get(`${this.API}/productos?desde=${e}`,this.headers)}getProductoPorId(e){return this.http.get(`${this.API}/productos/${e}`)}updateProducto(e){return this.http.put(`${this.API}/productos/${e._id}`,e,this.headers)}deleteProducto(e){return this.http.delete(`${this.API}/productos/${e}`,this.headers)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),_=(()=>{class o{constructor(e,r,n){this.fb=e,this.productosService=r,this.router=n,this.miFormulario=this.fb.group({name:[,[a.kI.required]],categoria:[""],precio:[,[a.kI.required]],descripcion:[,[a.kI.required]]})}guardar(){this.productosService.addNewProducto(this.miFormulario.value).subscribe(),b().fire({icon:"success",title:"Producto Registrado",showConfirmButton:!1,timer:1500}),this.router.navigateByUrl("productos/listado")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(l),t.Y36(s.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-agregar"]],decls:42,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["autocomplete","off",1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-5"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],[1,"col-auto"],["formControlName","categoria",1,"form-select"],["value",""],["value","Bebidas"],["value","Tecnologia"],["value","Ropa"],["value","Musica"],[1,"col-md-2"],["type","number","formControlName","precio",1,"form-control"],[1,"col-md-4"],["type","file",1,"form-control"],[1,"col-md-5","form-floating"],["placeholder","Ingrese una breve descripcion","formControlName","descripcion",1,"form-control",2,"height","100px"],["for","floatingTextarea2"],[1,"mb-3"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button","routerLink","../listado",1,"btn","btn-danger"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Agregar Producto"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("ngSubmit",function(){return r.guardar()}),t.TgZ(6,"div",4)(7,"label",5),t._uU(8,"Ingrese su producto"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"div",7)(11,"label",5),t._uU(12,"Categoria"),t.qZA(),t.TgZ(13,"select",8)(14,"option",9),t._uU(15,"Selecciona una categoria"),t.qZA(),t.TgZ(16,"option",10),t._uU(17,"Bebidas"),t.qZA(),t.TgZ(18,"option",11),t._uU(19,"Tecnologia"),t.qZA(),t.TgZ(20,"option",12),t._uU(21,"Ropa"),t.qZA(),t.TgZ(22,"option",13),t._uU(23,"Musica"),t.qZA()()(),t.TgZ(24,"div",14)(25,"label",5),t._uU(26,"Precio"),t.qZA(),t._UZ(27,"input",15),t.qZA(),t.TgZ(28,"div",16)(29,"label",5),t._uU(30,"Subir Imagen"),t.qZA(),t._UZ(31,"input",17),t.qZA(),t.TgZ(32,"div",18),t._UZ(33,"textarea",19),t.TgZ(34,"label",20),t._uU(35,"Ingrese una breve descripcion"),t.qZA()(),t.TgZ(36,"div",21)(37,"button",22),t.NdJ("click",function(){return r.guardar()}),t._uU(38,"Agregar"),t.qZA(),t._uU(39," \xa0 "),t.TgZ(40,"button",23),t._uU(41,"Cancelar"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",r.miFormulario),t.xp6(32),t.Q6J("disabled",r.miFormulario.invalid))},dependencies:[a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,s.rH]}),o})();var T=u(4004);const U=d.N.baseUrl;let P=(()=>{class o{constructor(e){this.http=e}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}buscar(e,r){return this.http.get(`${U}/todo/coleccion/${e}/${r}`,this.headers).pipe((0,T.U)(c=>c.resultados))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const p=d.N.baseUrl;let y=(()=>{class o{transform(e,r){return e?e.includes("https")?e:e?`${p}/upload/${r}/${e}`:`${p}/upload/productos/no-image`:`${p}/upload/productos/no-image`}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"imagen",type:o,pure:!0}),o})();function q(o,i){if(1&o&&(t.TgZ(0,"div",17)(1,"div",18),t._UZ(2,"img",19),t.ALo(3,"imagen"),t.TgZ(4,"div",20)(5,"h5",21),t._uU(6),t.qZA(),t.TgZ(7,"p",22),t._uU(8),t.qZA(),t.TgZ(9,"p",22),t._uU(10),t.qZA(),t.TgZ(11,"div",23)(12,"button",24),t._UZ(13,"i",25),t._uU(14,"Add to Cart"),t.qZA(),t.TgZ(15,"button",26),t._UZ(16,"i",27),t._uU(17,"More Info"),t.qZA()()()()()),2&o){const e=i.$implicit;t.xp6(2),t.Q6J("src",t.xi3(3,5,e.img,"productos"),t.LSH)("alt",e.name),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.descripcion),t.xp6(2),t.Oqu(e.precio)}}const C=[{path:"",component:v,children:[{path:"agregar",component:_},{path:"listado",component:(()=>{class o{constructor(e,r,n){this.productosService=e,this.busquedasService=r,this.router=n,this.totalProductos=0,this.productos=[],this.productosTemp=[],this.desde=0,this.imgUrl=""}ngOnInit(){this.cargarProductos()}cargarProductos(){this.productosService.getProductos(this.desde).subscribe(({total:e,producto:r})=>{this.totalProductos=e,this.productos=r,this.productosTemp=r})}borrar(e){this.productosService.deleteProducto(e).subscribe(r=>{this.router.navigateByUrl("/RefrshComponent",{skipLocationChange:!0}).then(()=>this.router.navigate(["productos/listado"]))})}cambiarPagina(e){this.desde+=e,this.desde<0?this.desde=0:this.desde>=this.totalProductos&&(this.desde-=e),this.cargarProductos()}buscar(e){return 0===e.length?this.productos=this.productosTemp:(this.busquedasService.buscar("productos",e).subscribe(r=>{this.productos=r}),!0)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l),t.Y36(P),t.Y36(s.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-listado"]],decls:28,vars:2,consts:[[1,"container"],[1,"card-header"],[1,"input-group","mb-3"],["id","inputGroup-sizing-default",1,"input-group-text"],[1,"bi","bi-search"],["type","text","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-default","placeholder","Buscar producto...",1,"form-control",3,"keyup"],["txtTermino",""],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],["aria-label","Page navigation example",2,"margin-top","15px"],[1,"pagination","justify-content-center"],[1,"page-item",2,"cursor","pointer"],["tabindex","-1","aria-disabled","true",1,"page-link",3,"click"],[1,"page-item","active"],[1,"page-link"],[1,"page-item"],[1,"page-link",3,"click"],[1,"col"],[1,"card","text-bg-dark"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-header","bg-transparent","border-white"],[1,"card-text"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-primary"],[1,"fa-solid","fa-cart-shopping"],["type","button",1,"btn","btn-secondary"],[1,"fa-solid","fa-circle-info"]],template:function(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3),t.qZA()(),t.TgZ(4,"div",2)(5,"span",3),t._UZ(6,"i",4),t.qZA(),t.TgZ(7,"input",5,6),t.NdJ("keyup",function(){t.CHM(n);const g=t.MAs(8);return t.KtG(r.buscar(g.value))}),t.qZA()(),t.TgZ(9,"div",7),t.YNc(10,q,18,8,"div",8),t.qZA(),t.TgZ(11,"nav",9)(12,"ul",10)(13,"li",11)(14,"a",12),t.NdJ("click",function(){return r.cambiarPagina(-5)}),t._uU(15,"Previous"),t.qZA()(),t.TgZ(16,"li",13)(17,"a",14),t._uU(18,"1"),t.qZA()(),t.TgZ(19,"li",15)(20,"a",14),t._uU(21,"2"),t.qZA()(),t.TgZ(22,"li",15)(23,"a",14),t._uU(24,"3"),t.qZA()(),t.TgZ(25,"li",11)(26,"a",16),t.NdJ("click",function(){return r.cambiarPagina(5)}),t._uU(27,"Next"),t.qZA()()()()()}2&e&&(t.xp6(3),t.hij("Productos ( ",r.productos.length," )"),t.xp6(7),t.Q6J("ngForOf",r.productos))},dependencies:[h.sg,y]}),o})()},{path:"editar/:_id",component:(()=>{class o{constructor(e,r,n,c){this.fb=e,this.productosServices=r,this.activatedRoute=n,this.router=c,this.miFormulario=this.fb.group({name:[,[a.kI.required]],categoria:[],precio:[,[a.kI.required]]})}ngOnInit(){this.activatedRoute.params.subscribe(({_id:e})=>this.cargarProducto(e))}cargarProducto(e){this.productosServices.getProductoPorId(e).subscribe(r=>{this.producto=r;const{name:n,categoria:c,precio:g}=r;this.miFormulario.setValue({name:n,categoria:c,precio:g})})}editarProducto(){const e={...this.miFormulario.value,_id:this.producto._id};this.productosServices.updateProducto(e).subscribe(r=>{b().fire({icon:"success",title:"Actualizado con exito!",showConfirmButton:!1,timer:1500}),this.router.navigateByUrl("productos/listado")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(l),t.Y36(s.gz),t.Y36(s.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-editar"]],decls:34,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","",1,"form-label"],["type","text","formControlName","name","placeholder","Escribe el producto",1,"form-control"],[1,"form-label"],["formControlName","categoria",1,"form-select"],["value",""],["value","Bebidas"],["value","Tecnologia"],["value","Ropa"],["value","Musica"],["type","number","formControlName","precio",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button","routerLink","/productos/listado",1,"btn","btn-danger"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Editar Producto"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("ngSubmit",function(){return r.editarProducto()}),t.TgZ(6,"div",4)(7,"label",5),t._uU(8,"Nombre del Producto:"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"div",4)(11,"label",7),t._uU(12,"Categoria"),t.qZA(),t.TgZ(13,"select",8)(14,"option",9),t._uU(15,"Selecciona una categoria"),t.qZA(),t.TgZ(16,"option",10),t._uU(17,"Bebidas"),t.qZA(),t.TgZ(18,"option",11),t._uU(19,"Tecnologia"),t.qZA(),t.TgZ(20,"option",12),t._uU(21,"Ropa"),t.qZA(),t.TgZ(22,"option",13),t._uU(23,"Musica"),t.qZA()()(),t.TgZ(24,"div",4)(25,"label",5),t._uU(26,"Precio"),t.qZA(),t._UZ(27,"input",14),t.qZA(),t.TgZ(28,"div",4)(29,"button",15),t.NdJ("click",function(){return r.editarProducto()}),t._uU(30,"Modificar"),t.qZA(),t._uU(31," \xa0 "),t.TgZ(32,"button",16),t._uU(33,"Cancelar"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",r.miFormulario),t.xp6(24),t.Q6J("disabled",r.miFormulario.invalid))},dependencies:[a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,s.rH],encapsulation:2}),o})()}]}];let k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[s.Bz.forChild(C),s.Bz]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})(),F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,a.UX,k,S]}),o})()}}]);